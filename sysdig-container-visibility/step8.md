When debugging an issue, it's useful to capture all the metrics within a system allowing them to be shared and analysed at a later date.

To capture all available data from the system, run sysdig with the parameter _-w_.

`sysdig -w capture.scap`{{execute}}

This will write all the trace data into a file. It's possible to stop the process using the keyboard shortcut  <kbd>CTRL</kbd>+<kbd>C</kbd>.

When debugging certain aspects of a system, it's useful to filter the collected data. For example, the command below will only collect data generated by the MySQL process.

 `sysdig -w mysql-capture.scap proc.name=mysql`{{execute}}

Like before, this can be stopped with <kbd>CTRL</kbd>+<kbd>C</kbd>.

Once the data has been captured, it's possible to replay it as if the data was generated from a live system.

The following command outputs all the data collected,  `sysdig -r capture.scap`{{execute}}

The captured data becomes powerful when combined with the chisels described previously. For example, based on the collected data it's possible to list which containers were running at the time.

`sysdig -r capture.scap -c lscontainers`{{execute}}

As all system calls are received, the HTTP traffic is viewable for a particular container during the tracing period.

`sysdig -r capture.scap -A -cecho_fds container.name=wp1 and fd.port=80`{{execute}}

The data can also be filtered down, only showing the data collected for an individual process.

`sysdig -r capture.scap proc.name=mysql`{{execute}}
